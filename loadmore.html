<!doctype html>
<html>
  <head>
    <title>实现加载更多功能</title>
    <mate http-equiv="Content-type" content="text/html;charset=utf-8">
    <style type="text/css">
      * {
        margin: 0;
        padding: 0;
      }
      ul {
        list-style: none;
        margin: 10px auto;
      }
      li {  
        width: 450x;
        padding: 10px;
        margin: 10px;
        border: 1px solid #ccc;
        cursor: pointer;
      }
      .hover {
        background-color: green;
        color: #fff;
      }
      #myBtn {
        display: block;
        width: 80px;
        margin: 0 auto;
        padding: 10px;
        border: 1px solid #e27272;
        border-radius: 4px;
        background-color: #fff;
        color: #e27272;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <ul id="ct">
      <li>内容1</li>
      <li>内容2</li>
    </ul>
    <button id="myBtn">加载更多</button>
    
   <script>
            var btn = document.querySelector("#myBtn")
            var ct = document.querySelector("#ct")
            var pageIndex = 0
            var isDataArrive = true
            btn.addElementListener("click", function(e){
                e.preventDefault()
                if(!isDataArrive){
                    return;
                }
                var xhr = new XMLHttpRequest()
                xhr.onreadystatechange = function(){
                    if(xhr.readyState === 4){
                        if(xhr.staus === 200 || xhr.staus === 304){
                            var result = JSON.parse(xhr.responseText)
                            var fragment = document.createDocumentFragment()
                            for(var i = 0; i < result.length; i++){
                                var node = document.createElement("li")
                                node.innerText = result[i]
                                fragment.appendChild(node)
                            }
                            ct.appendChild(fragment)
                            pageIndex += 5
                        }else{
                            alert("出错了")
                        }
                        isDataArrive = true
                    }
                }
                xhr.open("get","/loadMore?index="+pageIndex+"&length=5",true)
                xhr.send()
                isDataArrive = false
            })
        </script>

  <body>
</html>
